import{_ as ne,o as c,c as y,a as e,A as kt,r as b,C as vt,D as Ve,E as tt,t as te,b as l,w as xe,g as M,h as Ce,T as pt,G as H,H as k,I as ft,J as $t,K as je,k as mt,F as Ne,L as nt,M as Tt,j as we,N as ht,O as Ye,B as E,P as qe,Q as pe,u as t,R as Q,n as ze,S as St,U as gt,d as Ut,V as Pe,i as Dt,W as Pt,s as Je,X as st,Y as Vt,Z as Nt}from"./entry.LfecROsi.js";import{a as yt,u as be,b as Ct,C as R,c as lt,M as ot,d as ut,D as Ie,I as Mt,A as Gt,E as At,R as Ot,U as rt,S as Rt,T as se}from"./Tab.CXdKEirn.js";import{T as m}from"./TextBox.uVFtYDLD.js";import{A as Xe}from"./Avatar.BD0StHdv.js";const Ht={},Bt={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Lt=e("path",{d:"M1.40002 5.31999V3.91999C1.40002 2.52559 2.52562 1.39999 3.92002 1.39999H5.32002M8.68002 1.39999H10.08C11.4744 1.39999 12.6 2.52559 12.6 3.91999V5.31999M12.6 9.23999V10.08C12.6 11.4744 11.4744 12.6 10.08 12.6H9.24002M5.32002 12.6H3.92002C2.52562 12.6 1.40002 11.4744 1.40002 10.08V8.67999M6.16002 4.19999V5.31999C6.16002 5.87999 5.88002 6.15999 5.32002 6.15999H4.20002C3.64002 6.15999 3.36002 5.87999 3.36002 5.31999V4.19999C3.36002 3.63999 3.64002 3.35999 4.20002 3.35999H5.32002C5.88002 3.35999 6.16002 3.63999 6.16002 4.19999ZM10.64 4.19999V5.31999C10.64 5.87999 10.36 6.15999 9.80002 6.15999H8.68002C8.12002 6.15999 7.84002 5.87999 7.84002 5.31999V4.19999C7.84002 3.63999 8.12002 3.35999 8.68002 3.35999H9.80002C10.36 3.35999 10.64 3.63999 10.64 4.19999ZM6.16002 8.67999V9.79999C6.16002 10.36 5.88002 10.64 5.32002 10.64H4.20002C3.64002 10.64 3.36002 10.36 3.36002 9.79999V8.67999C3.36002 8.11999 3.64002 7.83999 4.20002 7.83999H5.32002C5.88002 7.83999 6.16002 8.11999 6.16002 8.67999ZM10.64 8.67999V9.79999C10.64 10.36 10.36 10.64 9.80002 10.64H8.68002C8.12002 10.64 7.84002 10.36 7.84002 9.79999V8.67999C7.84002 8.11999 8.12002 7.83999 8.68002 7.83999H9.80002C10.36 7.83999 10.64 8.11999 10.64 8.67999Z",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ft=[Lt];function qt(n,C){return c(),y("svg",Bt,Ft)}const zt=ne(Ht,[["render",qt]]),jt={},Zt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Et=e("path",{d:"M4.83337 4.66668H11.1667V3.33334C11.1667 2.00001 10.6667 1.33334 9.16671 1.33334H6.83337C5.33337 1.33334 4.83337 2.00001 4.83337 3.33334V4.66668ZM10.6667 10V12.6667C10.6667 14 10 14.6667 8.66671 14.6667H7.33337C6.00004 14.6667 5.33337 14 5.33337 12.6667V10H10.6667Z",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Wt=e("path",{d:"M11.3333 9.99999H4.66667M4.66667 7.33332H6.66667M14 6.66666V9.99999C14 11.3333 13.3333 12 12 12H10.6667V9.99999H5.33333V12H4C2.66667 12 2 11.3333 2 9.99999V6.66666C2 5.33332 2.66667 4.66666 4 4.66666H12C13.3333 4.66666 14 5.33332 14 6.66666Z",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Kt=[Et,Wt];function Qt(n,C){return c(),y("svg",Zt,Kt)}const Jt=ne(jt,[["render",Qt]]),Xt={},Yt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},en=e("path",{d:"M4.61111 1V3.1M10.3889 1V3.1M1.36111 5.963H13.6389M14 5.55V11.5C14 13.6 12.9167 15 10.3889 15H4.61111C2.08333 15 1 13.6 1 11.5V5.55C1 3.45 2.08333 2.05 4.61111 2.05H10.3889C12.9167 2.05 14 3.45 14 5.55Z",stroke:"currentColor","stroke-width":"1.5","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),tn=e("path",{d:"M9.99514 10H10M9.99514 12H10M7.99784 10H8.00324M7.99784 12H8.00324M6 10H6.0054M6 12H6.0054",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),nn=[en,tn];function ln(n,C){return c(),y("svg",Yt,nn)}const Ze=ne(Xt,[["render",ln]]),wt=kt("sales",()=>{const n=b([]);b([]);async function C(u,h){}return{Sales:n,GetItems:C}}),et=(n,C,u,h)=>{if(n>0)return n/u*h*C},on={},an={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none"},sn=vt('<g clip-path="url(#clip0_5518_108009)"><path d="M7.99999 5.33333V8.66666M7.99999 14.6667C11.6667 14.6667 14.6667 11.6667 14.6667 8C14.6667 4.33333 11.6667 1.33333 7.99999 1.33333C4.33333 1.33333 1.33333 4.33333 1.33333 8C1.33333 11.6667 4.33333 14.6667 7.99999 14.6667Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M7.99667 10.6667H8.00267" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_5518_108009"><rect width="16" height="16" fill="currentColor"></rect></clipPath></defs>',2),un=[sn];function rn(n,C){return c(),y("svg",an,un)}const at=ne(on,[["render",rn]]),cn={class:"switch-container"},dn={class:"row"},vn={class:"icon"},pn={class:"switch"},fn={__name:"Switch",props:Ve(["label","trueText","falseText","labelIcon"],{input:{},inputModifiers:{}}),emits:Ve(["changeSwitch"],["update:input"]),setup(n,{emit:C}){const u=C,h=tt(n,"input"),d=b(!0),p=b(!1);function P(N){A(),N?d.value=!0:p.value=!0,h.value=N,u("changeSwitch",N)}A(),h.value?d.value=!0:p.value=!0;function A(){d.value=!1,p.value=!1}return(N,r)=>(c(),y("div",cn,[e("label",dn,[e("span",null,te(n.label),1),e("div",vn,[l(pt,{position:"bottom",text:`0 = نقدي 
 1 = اجل`},{default:xe(()=>[(c(),M(Ce(n.labelIcon)))]),_:1})])]),e("div",pn,[e("span",{class:H(["trueSide",[{active:d.value}]]),onClick:r[0]||(r[0]=G=>P(!0))},te(n.trueText),3),e("span",{class:H(["falseSide",[{active:p.value}]]),onClick:r[1]||(r[1]=G=>P(!1))},te(n.falseText),3)])]))}},mn=fn,hn={key:0},gn=["disabled","placeholder","readonly"],yn={__name:"TextArea",props:Ve(["label","color","disabled","background","placeholder","clearable","readOnly","rightIcon","leftIcon","fullWidth","value"],{input:{},inputModifiers:{}}),emits:["update:input"],setup(n){const C=tt(n,"input");function u(h){C.value=h}return(h,d)=>(c(),y("div",{class:H(["input-group",{"full-width":n.fullWidth}])},[n.label?(c(),y("label",hn,te(n.label),1)):k("",!0),e("div",{class:H(["textarea",[n.color,n.background,{disabled:n.disabled},{readonly:n.readOnly}]])},[ft(e("textarea",{type:"text",disabled:n.disabled,placeholder:n.placeholder,"onUpdate:modelValue":d[0]||(d[0]=p=>C.value=p),readonly:n.readOnly,onInput:d[1]||(d[1]=p=>u(p.target.value))},null,40,gn),[[$t,C.value]]),n.clearable?(c(),y("div",{key:0,class:"icon",onClick:d[2]||(d[2]=(...p)=>h.clearInput&&h.clearInput(...p))})):k("",!0)],2)],2))}},It=yn,Cn={},wn={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},In=vt('<g clip-path="url(#clip0_971_5883)"><path d="M14.9902 8C14.9902 11.864 11.8542 15 7.99023 15C4.12623 15 0.990234 11.864 0.990234 8C0.990234 4.136 4.12623 1 7.99023 1C11.8542 1 14.9902 4.136 14.9902 8Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.99023 10L8.47063 9.0352C8.20592 8.86832 7.99023 8.46675 7.99023 8.1382V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_971_5883"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2),xn=[In];function bn(n,C){return c(),y("svg",wn,xn)}const _n=ne(Cn,[["render",bn]]),kn={key:0,class:"text"},$n={key:1,class:"icon"},Tn={key:0,class:"dropMenu button center"},Sn={__name:"Post",props:["text","color","noIcon","menu","menuItems"],setup(n){const C=b(!1);return je(()=>{window.addEventListener("click",()=>{C.value=!1},!0)}),mt(()=>{window.removeEventListener("click",()=>{})}),(u,h)=>(c(),y("div",{class:"post-container",onClick:h[0]||(h[0]=we(d=>C.value=!0,["stop"]))},[e("div",{class:H(["post",[n.color]])},[n.text?(c(),y("span",kn,te(n.text),1)):k("",!0),n.noIcon?k("",!0):(c(),y("div",$n,[(c(),M(Ce(yt)))]))],2),n.menu&&C.value?(c(),y("div",Tn,[(c(!0),y(Ne,null,nt(n.menuItems,(d,p)=>(c(),M(Tt,{key:p,text:d},null,8,["text"]))),128))])):k("",!0)]))}},ct=Sn,Un=["onKeypress"],Dn={class:"model"},Pn={class:"header"},Vn={class:"row gap-10 align-center"},Nn={class:"text"},Mn={class:"icon"},Gn={class:"content"},An={class:"title"},On={class:"actions row"},Rn={__name:"Model",props:Ve(["headerText","headerIcon","title","content","confirmText","cancelText","confirmColor","component","iconToolTip","iconToolTipPosition"],{show:{},showModifiers:{}}),emits:Ve(["confirm","cancle"],["update:show"]),setup(n,{emit:C}){const u=tt(n,"show"),h=C;je(()=>{let P=document.querySelector(".confirmButton");P&&P.focus()});function d(){h("confirm")}function p(){u.value=!1,h("cancle")}return(P,A)=>(c(),y("div",{class:H(["overlay",[{show:u.value}]]),onClick:we(p,["self"]),onKeypress:qe(we(p,["self"]),["esc"])},[e("div",Dn,[e("div",Pn,[e("div",Vn,[e("span",Nn,te(n.headerText),1),n.headerIcon?(c(),M(pt,{key:0,text:n.iconToolTip,position:n.iconToolTipPosition},{default:xe(()=>[e("div",Mn,[(c(),M(Ce(n.headerIcon)))])]),_:1},8,["text","position"])):k("",!0)]),e("div",{class:"icon",onClick:we(p,["stop"])},[l(ht)])]),e("div",Gn,[e("h3",An,te(n.title),1),e("div",null,[Ye(P.$slots,"default")]),e("div",On,[l(E,{text:n.cancelText?n.cancelText:"إلغاء",outline:!0,onClickCapture:p},null,8,["text"]),l(E,{text:n.confirmText?n.confirmText:"نعم",color:n.confirmColor,onClickCapture:d,class:"confirmButton"},null,8,["text","color"])])])])],42,Un))}},dt=Rn,Hn={class:"flex-column normal-table model-table mb-8 gap-16"},Bn=e("thead",null,[e("tr",null,[e("th",null,"الرقم"),e("th",null,"الصنف")])],-1),Ln=["onClick","onDblclick"],Fn={class:"text-center"},qn={class:"item-column"},zn={__name:"AlternativeItems",emits:["insertAlternative"],setup(n,{emit:C}){const u=be(),h=C,{AlternativesItems:d,SelectedAlternative:p}=pe(u),P=b(null);function A(r,G){p.value=r,h("insertAlternative")}function N(r,G){p.value=r,P.value=r}return(r,G)=>{var T;return c(),y("div",Hn,[l(m,{leftIcon:Ct,placeholder:"رقم ,اسم الصنف"}),e("table",null,[Bn,e("tbody",null,[(c(!0),y(Ne,null,nt((T=t(d))==null?void 0:T.data,(O,$)=>(c(),y("tr",{key:$,onClick:W=>N(O.gun),onDblclick:W=>A(O.gun),class:H({selected:t(P)===O.gun})},[e("td",Fn,te($+1),1),e("td",qn,te(O.name),1)],42,Ln))),128))])])])}}},jn=zn,Zn={class:"flex-column gap-6"},En={class:"grid-2 gap-6"},Wn={__name:"CostCenter",setup(n){return(C,u)=>(c(),y("div",Zn,[l(R,{label:"مركز التكلفة"}),e("div",En,[e("div",null,[l(R,{label:"إحتساب الضريبة "})]),e("div",null,[l(m,{label:"تاريخ الاستحقاق",leftIcon:Ze})])])]))}},Kn=Wn,Qn={class:"flex-column gap-6"},Jn={class:"grid-2 gap-4"},Xn={__name:"Saleman",setup(n){const C=be(),{GeneralFields:u,SalesMen:h}=pe(C);return lt(),(d,p)=>(c(),y("div",Qn,[l(R,{label:"اسم المندوب",items:t(h)||[],displayTitle:"name",returnValue:"gun",valueReturn:t(u).salesmanGUN,"onUpdate:valueReturn":p[0]||(p[0]=P=>t(u).salesmanGUN=P)},null,8,["items","valueReturn"]),e("div",Jn,[e("div",null,[l(m,{label:"رقم فاتورة المندوب"})]),e("div",null,[l(m,{label:"تاريخ الاستحقاق",leftIcon:Ze})])])]))}},Yn=Xn,el={class:"flex-column gap-6"},tl={__name:"Notes",setup(n){const C=b("هذا النص هو مثال لنص يمكن أن يستبدل في نفس المساحة، لقد تم توليد هذا النص من مولد النص العربى،");return(u,h)=>(c(),y("div",el,[l(It,{input:t(C),"onUpdate:input":h[0]||(h[0]=d=>Q(C)?C.value=d:null)},null,8,["input"])]))}},nl=tl,ll={class:"grid-2 gap-4"},ol={__name:"BuyORBook",setup(n){return(C,u)=>(c(),y("div",ll,[e("div",null,[l(R,{label:"تاريخ الاستحقاق"})]),e("div",null,[l(m,{label:"رقم السند",leftIcon:Ze})])]))}},al=ol,il={class:"flex-column pr-8 pl-8 gap-6"},sl={class:"row flex-column-end gap-6"},ul={class:"grid-2 gap-6"},rl={class:"grid-2 gap-6"},cl={__name:"CustomerDetails",props:["customerValidation"],emits:["customerHasDiscount"],setup(n,{emit:C}){const u=be();lt();const{Customers:h,Customer:d,CustomerDiscount:p}=pe(u),P=b(""),A=C;function N(G){}function r(G,T){d.value.gun=G,A("customerHasDiscount",G,T)}return(G,T)=>(c(),y("div",il,[e("div",sl,[l(R,{valueReturn:t(P),"onUpdate:valueReturn":T[0]||(T[0]=O=>Q(P)?P.value=O:null),label:"العميل",clearable:!0,color:t(d).isSuspend||n.customerValidation?"danger":void 0,leftInnerIconItem:"isSuspend",leftInnerIcon:t(d).isSuspend?at:"",leftInnerIconToolTip:"هذا العميل موقف",leftInnerIconToolTipPosition:"bottom",class:"flex-grow",items:t(h)||[],displayTitle:"name",returnValue:"gun",input:t(d).name,"onUpdate:input":T[1]||(T[1]=O=>t(d).name=O),onSetInput:N,onSetItem:r},null,8,["valueReturn","color","leftInnerIcon","items","input"]),l(E,{onlyIcon:!0,color:"neutral",icon:ot})]),e("div",ul,[e("div",null,[l(m,{label:"الرقم الضريبي",input:t(d).tin,"onUpdate:input":T[2]||(T[2]=O=>t(d).tin=O),type:"number"},null,8,["input"])]),e("div",null,[l(m,{label:"رقم الجوال ",input:t(d).mobile,"onUpdate:input":T[3]||(T[3]=O=>t(d).mobile=O),type:"number"},null,8,["input"])])]),e("div",rl,[e("div",null,[l(m,{label:"حد المديونية",readOnly:!0,type:"number"})]),e("div",null,[l(m,{label:"الرصيد المدين ",readOnly:!0,type:"number"})])])]))}},dl=cl,vl={class:"flex-column gap-6 pl-8 pr-8"},pl={class:"grid-4 gap-4"},fl={class:"grid-3 gap-4"},ml={class:"grid-3 gap-4"},hl={__name:"CustomerAddresses",setup(n){const C=be(),{Customer:u}=pe(C);return(h,d)=>(c(),y("div",vl,[e("div",pl,[e("div",null,[l(m,{label:"البلد",input:t(u).country,"onUpdate:input":d[0]||(d[0]=p=>t(u).country=p)},null,8,["input"])]),e("div",null,[l(m,{label:"المنطقة",input:t(u).area,"onUpdate:input":d[1]||(d[1]=p=>t(u).area=p)},null,8,["input"])]),e("div",null,[l(m,{label:"المدينة",input:t(u).city,"onUpdate:input":d[2]||(d[2]=p=>t(u).city=p)},null,8,["input"])]),e("div",null,[l(m,{label:"الحي",input:t(u).neighborhood,"onUpdate:input":d[3]||(d[3]=p=>t(u).neighborhood=p)},null,8,["input"])])]),e("div",fl,[e("div",null,[l(m,{label:"الشارع الرئيسي",input:t(u).street,"onUpdate:input":d[4]||(d[4]=p=>t(u).street=p)},null,8,["input"])]),e("div",null,[l(m,{label:"رقم المبنى",input:t(u).buildingNo,"onUpdate:input":d[5]||(d[5]=p=>t(u).buildingNo=p)},null,8,["input"])]),e("div",null,[l(m,{label:"الرمز البريدي",input:t(u).postelCode,"onUpdate:input":d[6]||(d[6]=p=>t(u).postelCode=p)},null,8,["input"])])]),e("div",ml,[e("div",null,[l(m,{label:"الرمز الاضافي",input:t(u).additionalCode,"onUpdate:input":d[7]||(d[7]=p=>t(u).additionalCode=p)},null,8,["input"])]),e("div",null,[l(m,{label:"ص.ب",input:t(u).fax,"onUpdate:input":d[8]||(d[8]=p=>t(u).fax=p)},null,8,["label","input"])]),e("div",null,[l(m,{label:"الهاتف الثابت",input:t(u).phone,"onUpdate:input":d[9]||(d[9]=p=>t(u).phone=p),type:"number"},null,8,["input"])]),e("div",null,[l(m,{label:"الفاكس",input:t(u).fax,"onUpdate:input":d[10]||(d[10]=p=>t(u).fax=p),type:"number"},null,8,["input"])])])]))}},gl=hl,yl={},Cl={width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wl=e("path",{d:"M6.91219 4.43333L5.10185 2.625M5.10185 2.625L3.2915 4.43333M5.10185 2.625V11.375M8.42081 9.56667L10.2312 11.375M10.2312 11.375L12.0415 9.56667M10.2312 11.375V2.625",stroke:"#51ADFC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Il=[wl];function xl(n,C){return c(),y("svg",Cl,Il)}const bl=ne(yl,[["render",xl]]),_l={},kl={width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$l=e("path",{d:"M6.07106 8.86555L9.46217 5.13449M6.28365 6.07011C6.4528 6.07011 6.61502 5.99618 6.73463 5.86458C6.85424 5.73299 6.92143 5.5545 6.92143 5.3684C6.92143 5.18229 6.85424 5.00381 6.73463 4.87221C6.61502 4.74062 6.4528 4.66669 6.28365 4.66669C6.1145 4.66669 5.95228 4.74062 5.83268 4.87221C5.71307 5.00381 5.64587 5.18229 5.64587 5.3684C5.64587 5.5545 5.71307 5.73299 5.83268 5.86458C5.95228 5.99618 6.1145 6.07011 6.28365 6.07011ZM9.67476 9.33335C9.84391 9.33335 10.0061 9.25942 10.1257 9.12783C10.2453 8.99623 10.3125 8.81775 10.3125 8.63164C10.3125 8.44554 10.2453 8.26705 10.1257 8.13546C10.0061 8.00386 9.84391 7.92993 9.67476 7.92993C9.50561 7.92993 9.34339 8.00386 9.22379 8.13546C9.10418 8.26705 9.03699 8.44554 9.03699 8.63164C9.03699 8.81775 9.10418 8.99623 9.22379 9.12783C9.34339 9.25942 9.50561 9.33335 9.67476 9.33335Z",stroke:"#51ADFC","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Tl=e("path",{d:"M7.83337 12.25C10.7329 12.25 13.0834 9.89957 13.0834 7C13.0834 4.10043 10.7329 1.75 7.83337 1.75C4.9338 1.75 2.58337 4.10043 2.58337 7C2.58337 9.89957 4.9338 12.25 7.83337 12.25Z",stroke:"#51ADFC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Sl=[$l,Tl];function Ul(n,C){return c(),y("svg",kl,Sl)}const Dl=ne(_l,[["render",Ul]]),Pl={},Vl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Nl=e("g",{"clip-path":"url(#clip0_1416_16451)"},[e("path",{d:"M10.5 6.00004H5.49998M10.5 10H5.49998M5.99998 14.6667H9.99998C13.3333 14.6667 14.6666 13.3334 14.6666 10V6.00004C14.6666 2.66671 13.3333 1.33337 9.99998 1.33337H5.99998C2.66665 1.33337 1.33331 2.66671 1.33331 6.00004V10C1.33331 13.3334 2.66665 14.6667 5.99998 14.6667Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ml=e("defs",null,[e("clipPath",{id:"clip0_1416_16451"},[e("rect",{width:"16",height:"16",fill:"white"})])],-1),Gl=[Nl,Ml];function Al(n,C){return c(),y("svg",Vl,Gl)}const Ol=ne(Pl,[["render",Al]]),Rl={},Hl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bl=e("path",{d:"M5.06667 8.86207L3 10.931M3 10.931L5.06667 13M3 10.931L13 10.931M10.9333 7.13793L13 5.06897M13 5.06897L10.9333 3M13 5.06897L3 5.06896",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ll=[Bl];function Fl(n,C){return c(),y("svg",Hl,Ll)}const ql=ne(Rl,[["render",Fl]]),zl={},jl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl=e("path",{d:"M10.6667 8H2M10.6667 4H2M6.66667 12H2M14 4V10.6667C14 11.0203 13.8595 11.3594 13.6095 11.6095C13.3594 11.8595 13.0203 12 12.6667 12H9.33333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),El=e("path",{d:"M10.6666 10.6666L9.33331 12L10.6666 13.3333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Wl=[Zl,El];function Kl(n,C){return c(),y("svg",jl,Wl)}const Ql=ne(zl,[["render",Kl]]),Jl={__name:"Popover",props:["text","position","textBox","show","disableOnclick"],setup(n){const C=n,u=b(!1);function h(){C.disableOnclick||(u.value=!u.value)}return ze(()=>C.show,d=>{d?u.value=!0:u.value=!1}),je(()=>{window.addEventListener("click",()=>{u.value=!1},!0)}),mt(()=>{window.removeEventListener("click",()=>{})}),(d,p)=>(c(),y("div",{class:"tooltip-container",onClickCapture:h},[Ye(d.$slots,"default"),ft(e("div",{class:H(["tooltip-content top",[C.position,{show:t(u)}]])},[Ye(d.$slots,"content")],2),[[St,t(u)]])],32))}},Xl=Jl,Yl=e("thead",null,[e("tr",null,[e("th",null,"الرقم"),e("th",null,"الصنف"),e("th",null,"الوحدة"),e("th",null,"المستودع"),e("th",null,"الكمية"),e("th",null,"السعر"),e("th",null,"المجموع"),e("th",null,"الحسم"),e("th",null,"الضريبة"),e("th",null,"الاجمالي"),e("th",null,"حذف")])],-1),eo={key:0},to={class:"text-center align-center gap-4 justify-center"},no={key:0,class:"circle"},lo={class:"item-column"},oo={key:0},ao={key:1},io={class:"icon delete"},so={__name:"SalesInvoiceTabel",props:["recalculate","itemValidation"],emits:["setInvoiceFooter","restRecalculate","recalculateTotalDiscount","clearValidation","showAlternativeItems"],setup(n,{emit:C}){const u=gt(),h=b(!1),d=n,p=C,P=wt(),A=be(),N=b(""),{NewItems:r,Units:G,Items:T,Warehouses:O,ItemDetails:$,GeneralFields:W,PriceType:le}=pe(A);let L=null;const ue=b(1),re=b("");b(!1),ze(()=>d.recalculate,v=>{v&&ke(null)});function ce(){L&&clearTimeout(L),L=setTimeout(()=>{P.GetItems(ue.value++,re.value)},400)}function F(){L&&clearTimeout(L),L=setTimeout(()=>{P.GetItems(1,re.value)},800)}ze(re,(v,i)=>{v===""&&(ue.value=1,P.Sales=[])});async function Ee(v,i){await A.GetItemDetails(v,i),r.value[i].quantity=1}function j(v){A.RemoveItem(v)}async function _(v,i){var g,V,J,q;let s=(V=(g=$.value[i])==null?void 0:g.nonServiceData)==null?void 0:V.units.findIndex(K=>K.gun===v);if(s>=0){p("clearValidation"),T.value.find(z=>z.gun===r.value[i].itemGUN);let K=await((q=(J=$.value[i])==null?void 0:J.nonServiceData)==null?void 0:q.units[s]);await A.GetItemQuantityByWarehouse(r.value[i].itemGUN,r.value[i].warehouseGUN,i),A.setPriceList(K,i),r.value[i].price=r.value[i].unitPriceList[W.value.priceType-1].price,r.value[i].discount=0,r.value[i].taxValue=ut(r.value[i].taxValue,r.value[i].price*1),_e(null,i),ke(i),p("recalculateTotalDiscount",W.value.totalDiscount)}}async function We(v,i){await A.GetItemQuantityByWarehouse(r.value[i].itemGUN,v,i),_e(null,i)}async function _e(v,i){var g,V,J,q;r.value[i].quantity;let s=(V=(g=$.value[i])==null?void 0:g.nonServiceData)==null?void 0:V.units.findIndex(K=>K.gun===r.value[i].unitGUN);if(s>=0){let K=await((q=(J=$.value[i])==null?void 0:J.nonServiceData)==null?void 0:q.units[s]);r.value[i].warehouseQuantity=r.value[i].warehouseQuantity/K.equivalent}ke(i)}function w(v,i){ke(i)}function he(v,i){typeof v=="string"&&v&&(v.includes("%")?(v=v.split("%")[0],v=parseFloat(v)/100*r.value[i].total,r.value[i].discount=et(v,r.value[i].quantity,r.value[i].total,r.value[i].price),oe(i)):!isNaN(parseInt(v))?(r.value[i].discount=et(parseInt(v),r.value[i].quantity,r.value[i].total,r.value[i].price),oe(i)):(r.value[i].discount="",oe(i)))}function ke(v){if(d.recalculate){for(let i=0;i<r.value.length-1;i++){let s=r.value[i];s.total=s.price*s.quantity,he(s.discount,i),B(i),s.net=s.total-s.discount+s.taxValue}p("restRecalculate")}else r.value[v].total=r.value[v].price*r.value[v].quantity,he(r.value[v].discount,v),B(v),oe(v)}function B(v){var i;r.value[v].taxValue=ut((i=$.value[v])==null?void 0:i.currentTaxValue,r.value[v].total),r.value[v].net=r.value[v].total+r.value[v].taxValue,oe(v)}function oe(v){r.value[v].net=r.value[v].total-r.value[v].discount+r.value[v].taxValue}function ae(v,i){var g,V;return(V=(g=$.value[i])==null?void 0:g.nonServiceData)==null?void 0:V.warehouses.findIndex(J=>J.gun===v)}let Y=[];const de=b(null);function Me(v,i){Y=[];let s=r.value[i].unitPriceList;for(let g=0;g<s.length;g++){const V=s[g];W.value.priceType===g+1&&v<V.price&&(v<s[3].price?(N.value="السعر الذي ادخلتها لصنف اقل من",Y.push("سعرالتكلفة"),Y.push(le.value[g].name),h.value=!0):(N.value=`السعر الذي ادخلتها لصنف اقل من السعر ${le.value[g].name}`,h.value=!0))}de.value=i}function $e(){h.value=!1;let i=document.querySelectorAll(".table-container-invoice table tr")[de.value+2].ownerDocument.querySelector(".discount input");i.focus(),i.select()}function Ke(){r.value[de.value].price=r.value[de.value].unitPriceList[W.value.priceType-1].price,w(null,de.value);let i=document.querySelectorAll(".table-container-invoice table tr")[de.value].ownerDocument.querySelector(".price input");i.focus(),i.select()}async function ge(v){var s,g;let i=T.value.find(V=>V.gun===r.value[v].itemGUN);r.value[v].itemGUN&&i&&i.type===1&&(g=(s=$.value[v])==null?void 0:s.nonServiceData)!=null&&g.isHasAvailableAccessories&&await A.GetInsertAccessoriesItems(r.value[v].itemGUN,u.meta.DocOrder)}async function Te(v){var s,g;let i=T.value.find(V=>V.gun===r.value[v].itemGUN);r.value[v].itemGUN&&i&&i.type===1&&(g=(s=$.value[v])==null?void 0:s.nonServiceData)!=null&&g.isHasAvailableAlternatives&&(p("showAlternativeItems"),await A.GetAlternativesItems(r.value[v].itemGUN,u.meta.DocOrder))}return(v,i)=>(c(),y(Ne,null,[e("table",null,[Yl,t(r).length>0?(c(),y("tbody",eo,[(c(!0),y(Ne,null,nt(t(r),(s,g)=>{var V,J,q,K,z,Ge,ee,Ae,ie,Oe,Re,Se,Ue,ye,De,He,Be,Le,ve,U,Fe;return c(),y("tr",{key:g},[e("td",to,[Ut(te(g+1)+" ",1),s.forSale===!1?(c(),y("span",no)):k("",!0)]),e("td",lo,[l(Xl,{disableOnclick:!0,position:"bottom-left",show:((J=(V=t($)[g])==null?void 0:V.nonServiceData)==null?void 0:J.isHasAvailableAccessories)||((K=(q=t($)[g])==null?void 0:q.nonServiceData)==null?void 0:K.isHasAvailableAlternatives)},{content:xe(()=>{var x,X,fe,me;return[(X=(x=t($)[g])==null?void 0:x.nonServiceData)!=null&&X.isHasAvailableAccessories?(c(),y("p",oo," أصناف ملحقة أضغط (F6) ")):k("",!0),(me=(fe=t($)[g])==null?void 0:fe.nonServiceData)!=null&&me.isHasAvailableAlternatives?(c(),y("p",ao," أصناف بديلة أضغط (F5) ")):k("",!0)]}),default:xe(()=>{var x,X,fe,me;return[l(E,{onlyIcon:!0,color:"neutral",menuLocation:"left",icon:ot,size:"md",menu:!0,menuItems:[{id:1,text:"كرت الصنف",rightIcon:Ol,value:"(F1)",disable:!1},{id:2,text:"الأصناف الملحقة",rightIcon:Ql,value:"(F6)",disabled:!((X=(x=t($)[g])==null?void 0:x.nonServiceData)!=null&&X.isHasAvailableAccessories)},{id:3,text:"الأصناف البديلة",rightIcon:ql,value:"(F5)",disabled:!((me=(fe=t($)[g])==null?void 0:fe.nonServiceData)!=null&&me.isHasAvailableAlternatives)},{id:4,text:"بحث متقدم",rightIcon:Ct,value:"(Enter)",disabled:!1},{id:5,text:"حذف",rightIcon:Ie,color:"danger",value:"(Delete)",disabled:!1}]},null,8,["menuItems"])]}),_:2},1032,["show"]),l(R,{onKeyup:qe(x=>j(g),["delete"]),onKeydown:[qe(we(x=>Te(g),["prevent"]),["f5"]),qe(we(x=>ge(g),["prevent"]),["f6"])],size:"sm",color:d.itemValidation?"danger":void 0,class:H({firstItem:g===0}),valueReturn:s.itemGUN,"onUpdate:valueReturn":x=>s.itemGUN=x,input:s.name,"onUpdate:input":x=>s.name=x,index:g,clearable:!0,bigData:!0,items:t(T)||[],displayTitle:"name",returnValue:"gun",onSetItem:Ee,onGetMoreItems:ce,placeholder:"رقم / باركود الصنف",onGetItemBySearch:F},null,8,["onKeyup","onKeydown","color","class","valueReturn","onUpdate:valueReturn","input","onUpdate:input","index","items"])]),e("td",null,[l(R,{size:"sm",input:s.unitName,"onUpdate:input":x=>s.unitName=x,valueReturn:s.unitGUN,"onUpdate:valueReturn":x=>s.unitGUN=x,index:g,items:((Ge=(z=t($)[g])==null?void 0:z.nonServiceData)==null?void 0:Ge.units)||[],selectFirstItem:!0,displayTitle:"name",returnValue:"gun",onSetItem:_,placeholder:"الوحدة",disabled:((ee=t($)[g])==null?void 0:ee.type)===2},null,8,["input","onUpdate:input","valueReturn","onUpdate:valueReturn","index","items","disabled"])]),e("td",null,[l(R,{size:"sm",input:s.warehouseName,"onUpdate:input":x=>s.warehouseName=x,valueReturn:s.warehouseGUN,"onUpdate:valueReturn":x=>s.warehouseGUN=x,index:g,items:((ie=(Ae=t($)[g])==null?void 0:Ae.nonServiceData)==null?void 0:ie.warehouses)||[],onSetItem:We,selectFirstItem:!0,displayTitle:"name",returnValue:"gun",placeholder:"المستودع",disabled:((Oe=t($)[g])==null?void 0:Oe.type)===2,leftInnerIcon:(Ue=(Se=(Re=t($)[g])==null?void 0:Re.nonServiceData)==null?void 0:Se.warehouses[ae(s.warehouseGUN,g)])!=null&&Ue.isSuspend?at:void 0,leftInnerIconToolTip:"هذا المستودع موقف",leftInnerIconToolTipPosition:"bottom",color:(He=(De=(ye=t($)[g])==null?void 0:ye.nonServiceData)==null?void 0:De.warehouses[ae(s.warehouseGUN,g)])!=null&&He.isSuspend?"danger":void 0},null,8,["input","onUpdate:input","valueReturn","onUpdate:valueReturn","index","items","disabled","leftInnerIcon","color"])]),e("td",null,[l(m,{size:"sm",input:s.quantity,"onUpdate:input":x=>s.quantity=x,onSetInput:_e,color:s.itemGUN?s.quantity===0?"danger":void 0:1,index:g,inputToolTipText:s.itemGUN?`الكمية في المستودع: ${s.warehouseQuantity?s.warehouseQuantity:0}`:void 0,inputToolTipPosition:"bottom"},null,8,["input","onUpdate:input","color","index","inputToolTipText"])]),e("td",null,[l(m,{class:"price",leftIcon:bl,size:"sm",input:s.price,"onUpdate:input":x=>s.price=x,onSetInput:w,onChangeInput:Me,index:g,inputToolTipText:(Be=s.unitPriceList[0])==null?void 0:Be.price,inputToolTipPosition:"bottom",menu:!0,menuItems:[{id:1,text:"سعر البيع",value:s!=null&&s.unitPriceList?(Le=s.unitPriceList[0])==null?void 0:Le.price:0},{id:2,text:"ادنى سعر بيع",value:s!=null&&s.unitPriceList?(ve=s.unitPriceList[1])==null?void 0:ve.price:0},{id:3,text:"سعر الجملة",value:s!=null&&s.unitPriceList?(U=s.unitPriceList[2])==null?void 0:U.price:0},{id:4,text:"سعر التكلفة",value:s!=null&&s.unitPriceList?(Fe=s.unitPriceList[3])==null?void 0:Fe.price:0}]},null,8,["input","onUpdate:input","index","inputToolTipText","menuItems"])]),e("td",null,[l(m,{size:"sm",type:"number",readOnly:!0,input:s.total,"onUpdate:input":x=>s.total=x},null,8,["input","onUpdate:input"])]),e("td",null,[l(m,{class:"discount",leftIcon:Dl,size:"sm",input:s.discount,"onUpdate:input":x=>s.discount=x,onSetInput:he,index:g},null,8,["input","onUpdate:input","index"])]),e("td",null,[l(m,{size:"sm",type:"number",readOnly:!0,input:s.taxValue,"onUpdate:input":x=>s.taxValue=x},null,8,["input","onUpdate:input"])]),e("td",null,[l(m,{size:"sm",type:"number",readOnly:!0,input:s.net,"onUpdate:input":x=>s.net=x},null,8,["input","onUpdate:input"])]),e("td",null,[e("div",io,[l(Ie,{onClick:x=>j(g)},null,8,["onClick"])])])])}),128))])):k("",!0)]),t(h)?(c(),M(Pe,{key:0,confirmColor:"neutral",confirmText:"تأكيد",show:t(h),"onUpdate:show":i[0]||(i[0]=s=>Q(h)?h.value=s:null),onConfirm:$e,onCancle:Ke,list:t(Y)||void 0,title:t(N),headerText:"تنبية"},null,8,["show","list","title"])):k("",!0)],64))}},uo=so,ro={key:0,class:"grid-3 gap-4"},co={key:1,class:"grid-3 gap-4"},vo={key:2,class:"col-12 mt-8"},po={__name:"Details",props:["isSalesInvoice","isReturnInvoice","isOfferPrice","isBooked","Details"],setup(n){return(C,u)=>(c(),y(Ne,null,[n.isSalesInvoice?(c(),y("div",ro,[e("div",null,[l(m,{label:"عدد الاصناف",readOnly:!0})]),e("div",null,[l(m,{label:"عدد الكميات",readOnly:!0})]),e("div",null,[l(m,{label:"الوزن",readOnly:!0})]),e("div",null,[l(m,{label:"تاريخ التسليم",readOnly:!0,input:n.Details.deliveryDate,"onUpdate:input":u[0]||(u[0]=h=>n.Details.deliveryDate=h)},null,8,["input"])]),e("div",null,[l(m,{label:"الوقت",readOnly:!0,input:n.Details.time,"onUpdate:input":u[1]||(u[1]=h=>n.Details.time=h)},null,8,["input"])]),e("div",null,[l(m,{label:"اليوم",readOnly:!0,input:n.Details.today,"onUpdate:input":u[2]||(u[2]=h=>n.Details.today=h)},null,8,["input"])])])):k("",!0),n.isReturnInvoice||n.isOfferPrice?(c(),y("div",co,[e("div",null,[l(m,{label:"عدد الاصناف",readOnly:!0,input:n.Details.itemsCount,"onUpdate:input":u[3]||(u[3]=h=>n.Details.itemsCount=h)},null,8,["input"])]),e("div",null,[l(m,{label:"عدد الكميات",readOnly:!0,input:n.Details.quantityCount,"onUpdate:input":u[4]||(u[4]=h=>n.Details.quantityCount=h)},null,8,["input"])]),e("div",null,[l(m,{label:"الوزن",readOnly:!0,input:n.Details.weight,"onUpdate:input":u[5]||(u[5]=h=>n.Details.weight=h)},null,8,["input"])])])):k("",!0),n.isReturnInvoice?(c(),y("div",vo,[l(m,{label:"سبب الارتجاع",readOnly:!0})])):k("",!0)],64))}},fo=po,mo={class:"grid-3 gap-4"},ho={__name:"Profit",setup(n){return(C,u)=>(c(),y("div",mo,[e("div",null,[l(m,{label:"التكلفة",readOnly:!0})]),e("div",null,[l(m,{label:"الربح",readOnly:!0})]),e("div",null,[l(m,{label:"نسبة الربح",readOnly:!0})])]))}},go=ho,yo={id:"pay-way-table"},Co=e("td",null,"1",-1),wo={class:"icon delete"},Io=e("td",null,"1",-1),xo={class:"icon delete"},bo=e("td",null,"1",-1),_o={class:"icon delete"},ko={__name:"PayWays",setup(n){return(C,u)=>(c(),y("table",yo,[e("tbody",null,[e("tr",null,[Co,e("td",null,[l(R,{size:"sm"})]),e("td",null,[l(R,{size:"sm"})]),e("td",null,[l(m,{size:"sm"})]),e("td",null,[e("div",wo,[l(Ie)])])]),e("tr",null,[Io,e("td",null,[l(R,{size:"sm"})]),e("td",null,[l(R,{size:"sm"})]),e("td",null,[l(m,{size:"sm"})]),e("td",null,[e("div",xo,[l(Ie)])])]),e("tr",null,[bo,e("td",null,[l(R,{size:"sm"})]),e("td",null,[l(R,{size:"sm"})]),e("td",null,[l(m,{size:"sm"})]),e("td",null,[e("div",_o,[l(Ie)])])])])]))}},$o=ko,To={class:"row"},So={class:"right-side-tree col-12 col-md-2"},Uo={class:"content border-right col-12 col-md-10"},Do={class:"top-buttons row"},Po={class:"d-flex align-center gap-6"},Vo={class:"d-flex align-center gap-6"},No={key:0,class:"avatar-group"},Mo={class:"row"},Go={class:"sheet flex-column gap-8 col-12 col-md-7 pl-6 pb-4"},Ao={class:"grid-5 gap-4"},Oo={key:0,class:"offer-price-details"},Ro={class:"grid-3 gap-4"},Ho={class:"mt-8"},Bo={key:1,class:"flex-column gap-8"},Lo={class:"row align-center tabs-container"},Fo={class:"sheet col-12 col-md-5 pr-6 pb-4"},qo={class:"flex-column gap-8"},zo={class:"row align-center tabs-container two-tabs"},jo={class:"col-6"},Zo={class:"col-6"},Eo={class:"table-container-invoice"},Wo={class:"invoice-footer"},Ko={class:"row"},Qo={class:"sheet col-12 col-md-5 pb-4 pl-8 footer-details"},Jo={class:"flex-column gap-8"},Xo={class:"row align-center tabs-container two-tabs"},Yo={class:"col-12 col-md-7 pl-8 pr-8 footer-leftside"},ea={class:"grid-4 gap-8"},ta={class:"row flex-column gap-6"},na={__name:"Invoice",props:["SalesInvoice","ReturnInvoice","OfferPrice","Booked"],emits:["recalculatePrice"],async setup(n,{emit:C}){let u,h;const d=gt(),{errorHandle:p,warningHandle:P}=Nt(),A=b(!1),N=b(!1),r=b(!1),G=b(!1),T=b(!1),O=b(""),$=b(!1),W=b(null),le=b(!1),L=b(!1),ue=b(!1),re=b(!1),ce=b(!1),F=b({customer:!1,item:!1,quantity:!1,warehouse:!1}),Ee=wt();pe(Ee);const j=be(),{GeneralFields:_,SelectedAlternative:We,ItemId:_e,NewItems:w,ItemDetails:he,GetBranchDataForOfferPrice:ke,Customer:B,Customers:oe,CustomerDiscount:ae,SalesMen:Y,Items:de,Branches:Me,PriceType:$e,TaxApplied:Ke}=pe(j),ge=Dt();[u,h]=Pt(()=>ge.CheckPermissions(d.meta.moduleId)),await u,h();const{Permissions:Te}=pe(ge),v=lt();let i="";const{SalesInvoice:s,ReturnInvoice:g,OfferPrice:V,Booked:J}=n;b({branchId:"",isCash:!0});const q=b("CustomerDetails"),K=Je({CustomerDetails:dl,CustomerAddresses:gl}),z=b("CostCenter"),Ge=Je({CostCenter:Kn,Saleman:Yn,Notes:nl,BuyORBook:al}),ee=b("Details"),Ae=Je({Details:fo,Profit:go,PayWays:$o}),ie=b(!0);je(async()=>{V&&await v.GetOfferPriceInvoices()});async function Oe(){var f,o;await ge.CheckPermissions(d.meta.moduleId),(f=Te.value)!=null&&f.canAccess&&((o=Te.value)!=null&&o.canAdd?(ie.value=!1,j.SetDefaultFields(),await j.GetBranches(),_.value.branchGUN=Me.value[0].gun,V&&j.GetBranchDataForOfferPrice(_.value.branchGUN,_.value.isCash),document.querySelector(".firstItem input").focus()):p("غير مصرح لك"))}function Re(){j.ClearEverythings(),ve.value={itemsCount:0,quantityCount:0,weight:0,deliveryDate:"",time:"",today:""},U.value={total:0,totalBeforeTax:0,discount:0,extarDiscount:0,taxValue:0,invoiceValue:0},ie.value=!0}const Se=b(null);async function Ue(f,o){let a=await oe.value.findIndex(I=>I.gun===f);if(a>=0&&w.value[0].itemGUN!==""){const I={...oe.value[a]};if(B.value=I,o&&(N.value=!0,i=`يوجد حسم لدى هذا العميل على الفواتير ${_.value.isCash?"نقد":"اجل"} هل تريد اعتماد الحسم الذي لدى العميل`),I.salesmanGUN){let S=Y.value.findIndex(D=>D.gun===I.salesmanGUN);S>=0&&(Se.value=S)}w.value[0].itemGUN&&((I.cashInvoiceDiscountPercentage||I.creditInvoiceDiscountPercentage)&&I.defaultPrice?(le.value=!0,W.value=I.defaultPrice):((I.cashInvoiceDiscountPercentage||I.creditInvoiceDiscountPercentage)&&w.value[0].itemGUN&&(N.value=!0,i="هل تريد اعتماد الحسم الخاص بالعميل"),I.defaultPrice&&w.value[0].itemGUN&&I.defaultPrice!==_.value.priceType&&(G.value=!0,W.value=I.defaultPrice)))}}function ye(){_.value.isCash?(B.value.cashInvoiceDiscountPercentage?ae.value=B.value.cashInvoiceDiscountPercentage:ae.value=0,console.log(B.value.cashInvoiceDiscountPercentage),x(`${ae.value}%`)):(B.value.creditInvoiceDiscountPercentage?ae.value=B.value.creditInvoiceDiscountPercentage:ae.value=0,x(`${ae.value}%`)),A.value=!1,N.value=!1}async function De(f){let o=!1;V&&await j.GetBranchDataForOfferPrice(_.value.branchGUN,_.value.isCash),Ue(B.value.gun,!0);for(let a=0;a<w.value.length-1;a++){const I=w.value[a];de.value.find(D=>D.gun===I.itemGUN)||(o=!0,w.value[a].forSale=!1)}if(o)T.value=!0;else{T.value=!0;for(let a=0;a<w.value.length-1;a++){const I=w.value[a];I.forSale=null}T.value=!1}}function He(){for(let f=0;f<w.value.length-1;f++)w.value[f].forSale===!1&&(w.value.splice(f,1),he.value.splice(f,1),f--);T.value=!1}async function Be(){var f,o,a;ie===!1&&(await De(),(f=B.value)!=null&&f.gun&&((o=oe.value)!=null&&o.find(D=>D.gun===B.value.gun)||j.ClearCustomer()),(a=Y.value)!=null&&a.find(S=>S.gun===_.value.salesmanGUN)||(_.value.gun,O.value=""),w.value[0].itemGUN!==""&&(r.value=!0))}async function Le(f,o){let a=[],I=[];if(f){if(w.value.length>1){for(let S=0;S<w.value.length-1;S++){const D=w.value[S];a.includes(D.itemGUN)?I.push({itemId:D.itemGUN,index:S}):a.push(D.itemGUN)}await j.GetItemsTaxes(a),I.length>0&&a.forEach(async S=>{let D=w.value.findIndex(Z=>Z.itemGUN===S&&Z.taxValue);if(D>=0)for(let Z=0;Z<w.value.length-1;Z++)w.value[Z].itemGUN===S&&(w.value[Z].taxValue=w.value[D].taxValue)})}}else for(let S=0;S<w.value.length-1;S++){const D=w.value[S];D.taxValue=null,D.net=D.total-D.discount}}ze(w.value,()=>{Fe()});const ve=b({itemsCount:0,quantityCount:0,weight:0,deliveryDate:"",time:"",today:""}),U=b({total:0,totalBeforeTax:0,discount:0,extarDiscount:0,taxValue:0,invoiceValue:0});function Fe(){let f=0,o=0,a=0,I=0,S=0;for(let D=0;D<w.value.length-1;D++){const Z=w.value[D];f+=parseInt(Z.quantity),a+=Z.total,S+=Z.taxValue,I+=parseFloat(Z.discount),o+=Z.net}ve.value.itemsCount=w.value.length-1,ve.value.quantityCount=parseInt(f),U.value.total=a,U.value.totalBeforeTax=a-I,U.value.taxValue=S,U.value.discount=I,U.value.invoiceValue=o}function x(f){f=f||ve.value.discount,typeof f=="string"&&f?(f.includes("%")&&(f=parseInt(f.split("%")[0]),f=f/100*U.value.total,U.value.discount=f),X(U.value.discount)):(f>0&&X(f),X(0))}function X(f){if(_.value.totalDiscount=f,f=parseInt(f),f>0){let o=f/(w.value.length-1);for(let a=0;a<w.value.length-1;a++){const I=w.value[a];I.discount=et(o,I.quantity,I.total,I.price),I.net=I.total-I.discount+I.taxValue}}}function fe(){}function me(){L||w.value[0].itemGUN&&(B.value.defaultPrice,_.value.priceType,G.value=!0)}function Qe(){var o;let f=W.value?W.value:_.value.priceType;_.value.priceType=f;for(let a=0;a<w.value.length-1;a++)w.value[a].price=(o=w.value[a].unitPriceList[f-1])==null?void 0:o.price;L||x(),$.value=!0,G.value=!1,$.value=!0,W.value=null}function xt(){if(ue.value&&L.value){Qe();let f=setTimeout(()=>{ye()},1e3);clearTimeout(f)}else ue.value?ye():L.value&&Qe();le.value=!1}async function bt(){var f;await ge.CheckPermissions(d.meta.moduleId),(f=Te.value)!=null&&f.canAdd?(await _t(),setTimeout(async()=>{F.value.customer||F.value.item||F.value.quantity||F.value.warehouse||await v.SaveOfferPriceInvoice()},500)):(p("غير مصرح لك"),ie.value=!0,j.ClearEverythings())}function _t(){var f,o;(w.value.length===1||w.value.length===0)&&(F.value.item=!0),console.log(_.value.isCash),_.value.isCash===!1&&(!B.value.gun||B.value.isSuspend)&&(F.value.customer=!0);for(let a=0;a<w.value.length-1;a++){const I=w.value[a];if((I.quantity===0||I.quantity==="")&&(F.value.quantity=!0),I.warehouseGUN){let S=(o=(f=he.value[a])==null?void 0:f.nonServiceData)==null?void 0:o.warehouses.find(D=>D.gun===I.warehouseGUN);S&&(S.isSuspend?F.value.warehouse=!0:F.value.warehouse=!1)}}}async function it(){await j.GetInsertAlternativesItems(_e.value,We.value,d.meta.DocOrder),ce.value=!1}return(f,o)=>(c(),y("div",To,[e("div",So,[l(Mt)]),e("div",Uo,[e("section",Do,[e("div",Po,[t(ie)?(c(),M(E,{key:0,color:"primary",text:"جديد",rightIcon:Gt,onClickCapture:o[0]||(o[0]=a=>Oe())})):k("",!0),t(ie)?k("",!0):(c(),M(E,{key:1,color:"netural",text:"إلغاء",rightIcon:ht,onClickCapture:Re})),l(E,{color:"warning",onlyIcon:!0,icon:At}),l(E,{color:"danger",onlyIcon:!0,icon:Ie}),l(E,{color:"neutral",onlyIcon:!0,icon:Ot}),l(E,{color:"neutral",onlyIcon:!0,icon:ot}),n.OfferPrice?k("",!0):(c(),M(ct,{key:2,text:"2233 مرحل /",menu:!0,menuItems:["إدراج فاتورة مبيعات","تكرار الفاتورة"]})),n.Booked?(c(),M(ct,{key:3,text:"منتهي",noIcon:!0,color:"danger"})):k("",!0)]),e("div",Vo,[n.SalesInvoice?k("",!0):(c(),y("div",No,[l(Xe,{icon:rt,borderColor:"primary",size:"md"}),l(Xe,{icon:rt,borderColor:"warning",size:"md"}),l(Xe,{text:"+10",borderColor:"warning",size:"md"})])),l(E,{color:"neutral",text:"باركود",rightIcon:zt}),l(E,{color:"neutral",text:"طباعة",menuLocation:"right",rightIcon:Jt,leftIcon:yt,menu:!0,menuItems:[{text:"طباعة مباشرة"},{text:"معاينة قبل الطباعة"},{text:"طباعة كاشير"}]}),l(E,{color:"primary",text:"حفظ",rightIcon:Rt,onClickCapture:bt})])]),e("section",null,[e("div",Mo,[e("div",Go,[e("div",Ao,[e("div",null,[l(mn,{label:"نوع الفاتورة",trueText:"نقدي",falseText:"اَجل",input:t(_).isCash,"onUpdate:input":o[1]||(o[1]=a=>t(_).isCash=a),onChangeSwitch:De},null,8,["input"])]),e("div",null,[l(m,{label:"رقم الفاتورة",input:t(_).no,"onUpdate:input":o[2]||(o[2]=a=>t(_).no=a),readOnly:!0},null,8,["input"])]),e("div",null,[l(R,{label:"الفرع",items:t(Me)||[],displayTitle:"name2",returnValue:"gun",isPage:!1,onSetItem:Be,valueReturn:t(_).branchGUN,"onUpdate:valueReturn":o[3]||(o[3]=a=>t(_).branchGUN=a),selectFirstItem:!0},null,8,["items","valueReturn"])]),e("div",null,[l(m,{label:"التاريخ",leftIcon:Ze})]),e("div",null,[l(m,{label:"الوقت",leftIcon:_n})])]),n.OfferPrice?(c(),y("div",Oo,[e("div",Ro,[e("div",null,[l(R,{label:"نوع السعر",displayTitle:"name",returnValue:"id",selectItem:t($e)?t($e)[t(_).priceType-1]:null,noFilter:!0,items:t($e),valueReturn:t(_).priceType,"onUpdate:valueReturn":o[4]||(o[4]=a=>t(_).priceType=a),selectFirstItem:!0,onSetItem:me},null,8,["selectItem","items","valueReturn"])]),e("div",null,[l(R,{label:"احتساب الضريبة",displayTitle:"name",returnValue:"id",noFilter:!0,items:t(Ke),valueReturn:t(_).isTaxApplied,"onUpdate:valueReturn":o[5]||(o[5]=a=>t(_).isTaxApplied=a),selectFirstItem:!0,onSetItem:Le},null,8,["items","valueReturn"])]),e("div",null,[l(R,{label:"اسم المندوب",items:t(Y)||[],displayTitle:"name",returnValue:"gun",clearable:!0,selectItem:t(Y)?t(Y)[t(Se)]:null,input:t(O),"onUpdate:input":o[6]||(o[6]=a=>Q(O)?O.value=a:null),valueReturn:t(_).salesmanGUN,"onUpdate:valueReturn":o[7]||(o[7]=a=>t(_).salesmanGUN=a)},null,8,["items","selectItem","input","valueReturn"])])]),e("div",Ho,[l(It,{label:"ملاحظة",text:"",input:t(_).note,"onUpdate:input":o[8]||(o[8]=a=>t(_).note=a)},null,8,["input"])])])):k("",!0),n.SalesInvoice||n.ReturnInvoice?(c(),y("div",Bo,[e("div",Lo,[e("div",{class:H([n.SalesInvoice?"col-3":"col-4"])},[l(se,{text:"مركز التكلفة",color:t(z)==="CostCenter"?"primary":"",onClick:o[9]||(o[9]=a=>z.value="CostCenter")},null,8,["color"])],2),e("div",{class:H([n.SalesInvoice?"col-3":"col-4"])},[l(se,{text:"المندوب",onClick:o[10]||(o[10]=a=>z.value="Saleman"),color:t(z)==="Saleman"?"primary":""},null,8,["color"])],2),e("div",{class:H([n.SalesInvoice?"col-3":"col-4"])},[l(se,{text:"ملاحظات",onClick:o[11]||(o[11]=a=>z.value="Notes"),color:t(z)==="Notes"?"primary":""},null,8,["color"])],2),n.SalesInvoice?(c(),y("div",{key:0,class:H([n.SalesInvoice?"col-3":"col-4"])},[l(se,{text:"شراء / حجز",onClick:o[12]||(o[12]=a=>z.value="BuyORBook"),color:t(z)==="BuyORBook"?"primary":""},null,8,["color"])],2)):k("",!0)]),e("div",null,[(c(),M(Ce(t(Ge)[t(z)])))])])):k("",!0)]),e("div",Fo,[e("div",qo,[e("div",zo,[e("div",jo,[l(se,{text:"بيانات العميل",color:t(q)==="CustomerDetails"?"primary":"",onClick:o[13]||(o[13]=a=>q.value="CustomerDetails")},null,8,["color"])]),e("div",Zo,[l(se,{text:"عناوين العميل",onClick:o[14]||(o[14]=a=>q.value="CustomerAddresses"),color:t(q)==="CustomerAddresses"?"primary":""},null,8,["color"])])]),e("div",null,[(c(),M(Ce(t(K)[t(q)]),{onCustomerHasDiscount:Ue,customerValidation:t(F).customer},null,40,["customerValidation"]))])])])])]),e("section",Eo,[l(uo,{itemValidation:t(F).item,recalculate:t($),onShowAlternativeItems:o[15]||(o[15]=()=>ce.value=!0),onRestRecalculate:o[16]||(o[16]=()=>$.value=!1),onRecalculateTotalDiscount:X,onClearValidation:o[17]||(o[17]=()=>t(F).item=!1)},null,8,["itemValidation","recalculate"])]),e("section",Wo,[e("div",Ko,[e("div",Qo,[e("div",Jo,[e("div",Xo,[e("div",{class:H([{"col-4":n.SalesInvoice},{"col-6":n.ReturnInvoice},{"col-12":n.OfferPrice}])},[l(se,{text:"التفاصيل",color:t(ee)==="Details"?"primary":"",onClick:o[18]||(o[18]=a=>ee.value="Details")},null,8,["color"])],2),!n.OfferPrice&&!n.ReturnInvoice?(c(),y("div",{key:0,class:H([{"col-4":n.SalesInvoice},{"col-6":n.ReturnInvoice},{"col-12":n.OfferPrice}])},[l(se,{text:"الارباح",onClick:o[19]||(o[19]=a=>ee.value="Profit"),color:t(ee)==="Profit"?"primary":""},null,8,["color"])],2)):k("",!0),n.SalesInvoice||n.ReturnInvoice?(c(),y("div",{key:1,class:H([{"col-4":n.SalesInvoice},{"col-6":n.ReturnInvoice},{"col-12":n.OfferPrice}])},[l(se,{text:"طرق الدفع",onClick:o[20]||(o[20]=a=>ee.value="PayWays"),color:t(ee)==="PayWays"?"primary":""},null,8,["color"])],2)):k("",!0)]),e("div",null,[(c(),M(Ce(t(Ae)[t(ee)]),{isSalesInvoice:n.SalesInvoice,isReturnInvoice:n.ReturnInvoice,isOfferPrice:n.OfferPrice,Details:t(ve)},null,8,["isSalesInvoice","isReturnInvoice","isOfferPrice","Details"]))])])]),e("div",Yo,[e("div",ea,[e("div",null,[l(m,{label:"المدفوع",readOnly:!0})]),e("div",null,[l(m,{label:"الإجمالي",readOnly:!0,input:t(U).total,"onUpdate:input":o[21]||(o[21]=a=>t(U).total=a),type:"number"},null,8,["input"])]),e("div",null,[l(m,{label:"الإجمالي قبل الضريبة",readOnly:!0,input:t(U).totalBeforeTax,"onUpdate:input":o[22]||(o[22]=a=>t(U).totalBeforeTax=a),type:"number"},null,8,["input"])]),e("div",null,[l(m,{label:"حسم إضافي"})]),e("div",null,[l(m,{label:"المتبقي",readOnly:!0})]),e("div",null,[l(m,{label:"الحسم",input:t(U).discount,"onUpdate:input":o[23]||(o[23]=a=>t(U).discount=a),onSetInput:x},null,8,["input"])]),e("div",null,[l(m,{label:"ضريبة القيمة المضافة",readOnly:!0,input:t(U).taxValue,"onUpdate:input":o[24]||(o[24]=a=>t(U).taxValue=a),type:"number"},null,8,["input"])]),e("div",null,[l(m,{label:"قيمة الفاتورة",background:"invoice-total",readOnly:!0,input:t(U).invoiceValue,"onUpdate:input":o[25]||(o[25]=a=>t(U).invoiceValue=a),type:"number"},null,8,["input"])])])])])])]),t(le)?(c(),M(dt,{key:0,show:t(le),"onUpdate:show":o[28]||(o[28]=a=>Q(le)?le.value=a:null),headerText:"تنبية",title:"هل تريد إعتماد",isSlot:!0,"cancel-text":"لا",confirmColor:"neutral",onConfirm:xt},{default:xe(()=>[e("div",ta,[l(st,{label:"السعر الخاص بالعميل",color:"primary",input:t(L),"onUpdate:input":o[26]||(o[26]=a=>Q(L)?L.value=a:null)},null,8,["input"]),l(st,{label:"الحسم الخاص بالعميل",color:"primary",input:t(ue),"onUpdate:input":o[27]||(o[27]=a=>Q(ue)?ue.value=a:null)},null,8,["input"])])]),_:1},8,["show"])):k("",!0),t(N)?(c(),M(Pe,{key:1,confirmColor:"neutral",cancelText:"لا",show:t(N),"onUpdate:show":o[29]||(o[29]=a=>Q(N)?N.value=a:null),onConfirm:ye,title:t(i),headerText:"تنبية"},null,8,["show","title"])):k("",!0),t(re)?(c(),M(Pe,{key:2,confirmColor:"neutral",cancelText:"لا",show:t(re),"onUpdate:show":o[30]||(o[30]=a=>Q(re)?re.value=a:null),onConfirm:f.setTaxApplied,title:" هل تريد تغير اسعار الاصناف باسعار الفرع المختار؟",headerText:"تنبية"},null,8,["show","onConfirm"])):k("",!0),t(r)?(c(),M(Pe,{key:3,confirmColor:"neutral",cancelText:"لا",show:t(r),"onUpdate:show":o[31]||(o[31]=a=>Q(r)?r.value=a:null),onConfirm:fe,title:" هل تريد تغير اسعار الاصناف باسعار الفرع المختار؟",headerText:"تنبية"},null,8,["show"])):k("",!0),t(G)?(c(),M(Pe,{key:4,confirmColor:"neutral",cancelText:"لا",show:t(G),"onUpdate:show":o[32]||(o[32]=a=>Q(G)?G.value=a:null),onConfirm:Qe,title:"هل تريد تغير  اسعار الاصناف المدرجة بالنوع المختار؟",headerText:"تنبية"},null,8,["show"])):k("",!0),t(T)?(c(),M(Vt,{key:5,stopHide:!0,color:"danger",multiline:!0,text:"اصناف غير متاحة في المبيعات او غير موجودة في الفرع المحدد",leftActionText:"حذف الكل",noIcon:!0,onClickLeftAction:He})):k("",!0),t(ce)?(c(),M(dt,{key:6,class:"fixed",show:t(ce),"onUpdate:show":o[33]||(o[33]=a=>Q(ce)?ce.value=a:null),headerText:"الاصناف البديلة",headerIcon:at,iconToolTip:"هذه الأصناف المرتبطة بالفرع والتي تقبل البيع بنفس نوع الفاتورة وغير موقفة",iconToolTipPosition:"bottom-left",confirmColor:"primary",confirmText:"إدراج",onConfirm:it},{default:xe(()=>[l(jn,{onInsertAlternative:it})]),_:1},8,["show"])):k("",!0)]))}},sa=na;export{sa as I,wt as u};
